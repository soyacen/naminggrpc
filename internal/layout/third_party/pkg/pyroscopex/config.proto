syntax = "proto3";

package grocer.pkg.pyroscopex;
option go_package = "github.com/soyacen/grocer/pkg/pyroscopex;pyroscopex";

import "google/protobuf/duration.proto";
import "google/protobuf/wrappers.proto";

// Configuration for Pyroscope continuous profiling
message Config {
  // Fraction of mutex contention events reported, 1 means all events are reported
  google.protobuf.Int32Value  mutex_profile_rate  = 1;
  // Fraction of blocking events reported, in nanoseconds
  google.protobuf.Int32Value  block_profile_rate  = 2;
  // Name of the application that will be displayed in Pyroscope UI
  google.protobuf.StringValue app_name            = 3;
  // Tags to attach to the profiling data, key-value pairs
  map<string, string>         tags                = 4;
  // Address of the Pyroscope server to send profiling data to
  google.protobuf.StringValue server_addr         = 5;
  // HTTP basic authentication username
  google.protobuf.StringValue basic_auth_user     = 6; // http basic auth user
  // HTTP basic authentication password
  google.protobuf.StringValue basic_auth_password = 7; // http basic auth password
  // Tenant ID for multi-tenant Pyroscope installations
  google.protobuf.StringValue tenant_id           = 8; // specify TenantId when using phlare multi-tenancy
  // How frequently profiling data should be uploaded to the server
  google.protobuf.Duration    upload_rate         = 9;
  // List of profile types to collect (e.g., cpu, mem, goroutines, etc.)
  repeated string             profile_types       = 10;
  // When true, disables automatic garbage collection runs between heap profile collections
  google.protobuf.BoolValue   disable_gc_runs     = 11; // this will disable automatic runtime.GC runs between getting the heap profiles
  // Additional HTTP headers to send with requests to the Pyroscope server
  map<string, string>         http_headers        = 12;
}